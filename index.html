<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Application | Key Legacy Realty</title>
    <link rel="stylesheet" href="css/te-style.css">
    <style>
        .form-section {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        .form-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <div class="brand">
                Key Legacy Realty
                <span class="sub">Philadelphia Rentals</span>
            </div>
            <div style="display: flex; align-items: center; gap: 15px;">
                <label
                    style="display: flex; align-items: center; gap: 8px; font-size: 11px; font-weight: 700; color: var(--accent-color); cursor: pointer;">
                    <input type="checkbox" id="devModeToggle" onchange="toggleDevMode()">
                    DEV MODE
                </label>
            </div>
        </header>

        <div class="split-layout">
            <!-- Left Sidebar: Context -->
            <div class="sidebar" style="padding: 0; display: flex; flex-direction: column;">
                <nav style="flex: 1;">
                    <button class="nav-item active" onclick="switchSection(1)" data-section="1">
                        <div class="step-number">1</div>
                        <div class="nav-title">Contact Information</div>
                    </button>
                    <button class="nav-item disabled" onclick="switchSection(2)" data-section="2">
                        <div class="step-number">2</div>
                        <div class="nav-title">Property Preferences</div>
                    </button>
                    <button class="nav-item disabled" onclick="switchSection(3)" data-section="3">
                        <div class="step-number">3</div>
                        <div class="nav-title">Financial Information</div>
                    </button>
                    <button class="nav-item disabled" onclick="switchSection(4)" data-section="4">
                        <div class="step-number">4</div>
                        <div class="nav-title">Scheduling &amp; Notes</div>
                    </button>
                </nav>
            </div>

            <!-- Right Panel: Form -->
            <div class="form-panel">
                <form id="fullApplicationForm" onsubmit="handleFinalSubmit(event)">

                    <!-- SECTION 1: IDENTITY -->
                    <div id="section-1" class="form-section active">
                        <div style="margin-bottom: 30px;">
                            <span class="badge">STEP 01 OF 04</span>
                            <h2 style="margin-top: 10px; font-size: 24px;">Contact Information</h2>
                        </div>

                        <div class="floating-label-group">
                            <input type="text" name="fullName" id="fullName" placeholder=" " required>
                            <label for="fullName">Full Name</label>
                        </div>

                        <div class="floating-label-group">
                            <input type="tel" name="phone" id="phone" placeholder=" " required>
                            <label for="phone">Phone Number</label>
                        </div>

                        <div class="floating-label-group">
                            <input type="email" name="email" id="email" placeholder=" " required>
                            <label for="email">Email Address</label>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Preferred Contact Method</label>
                            <div style="display: flex; gap: 20px; margin-top: 5px;">
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="radio" name="preferredContact" value="email" required>
                                    <span style="font-size: 12px;">Email</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="radio" name="preferredContact" value="text" required>
                                    <span style="font-size: 12px;">Text Message</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="radio" name="preferredContact" value="phone" required>
                                    <span style="font-size: 12px;">Phone Call</span>
                                </label>
                            </div>
                        </div>

                        <div class="input-group">
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" name="agent" id="agentCheckbox" value="yes">
                                <span class="input-label" style="margin: 0;">I have a Real Estate Agent</span>
                            </label>
                        </div>

                        <button type="button" class="btn-submit" onclick="nextSection()">Continue</button>
                    </div>

                    <!-- SECTION 2: PROPERTY REQUIREMENTS -->
                    <div id="section-2" class="form-section">
                        <div style="margin-bottom: 30px;">
                            <span class="badge">STEP 02 OF 04</span>
                            <h2 style="margin-top: 10px; font-size: 24px;">Property Preferences</h2>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Property Type</label>
                            <input type="text" name="propertyInterest" placeholder="Apartment, House, Studio" required>
                        </div>

                        <!-- Button Group: Bedrooms -->
                        <div class="input-group">
                            <label class="input-label">Bedrooms</label>
                            <div class="button-group" id="bedroom-group">
                                <!-- JS will populate hidden input -->
                                <input type="hidden" name="bedrooms" id="input-bedrooms" required>

                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-bedrooms', 'Studio')">Studio</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-bedrooms', '1 Bedroom')">1 Bedroom</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-bedrooms', '2 Bedroom')">2 Bedroom</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-bedrooms', '3 Bedroom')">3 Bedroom</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-bedrooms', '4 Bedroom')">4 Bedroom</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-bedrooms', '5+ Bedrooms')">5+ Bedrooms</button>
                            </div>
                        </div>

                        <!-- Button Group: Neighborhoods -->
                        <div class="input-group">
                            <label class="input-label">Preferred Neighborhoods</label>
                            <div class="button-group">
                                <input type="hidden" name="neighborhoods" id="input-neighborhoods" required>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'Center City')">Center
                                    City</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'Rittenhouse Square')">Rittenhouse
                                    Square</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'Old City / Society Hill')">Old
                                    City / Society Hill</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'University City')">University
                                    City</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'Northern Liberties / Fishtown')">Northern
                                    Liberties / Fishtown</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'Fairmount / Art Museum')">Fairmount
                                    / Art Museum</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'South Philly')">South
                                    Philly</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'East Passyunk')">East
                                    Passyunk</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'Manayunk / Roxborough')">Manayunk
                                    / Roxborough</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'Chestnut Hill')">Chestnut
                                    Hill</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'Mt. Airy')">Mt. Airy</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'Northeast Philly')">Northeast
                                    Philly</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'North Philly')">North
                                    Philly</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-neighborhoods', 'Southwest Philly')">Southwest
                                    Philly</button>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Move-In Date</label>
                            <input type="date" name="moveInDate" required>
                        </div>

                        <!-- Button Group: Budget -->
                        <div class="input-group">
                            <label class="input-label">Monthly Budget</label>

                            <div class="button-group">
                                <input type="hidden" name="budget" id="input-budget" required>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-budget', '$800-$1,000')">$800-$1,000</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-budget', '$1,000-$1,200')">$1,000-$1,200</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-budget', '$1,200-$1,500')">$1,200-$1,500</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-budget', '$1,500-$1,800')">$1,500-$1,800</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-budget', '$1,800-$2,200')">$1,800-$2,200</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-budget', '$2,200+')">$2,200+</button>
                            </div>
                        </div>

                        <!-- Button Group: Must-Haves -->
                        <div class="input-group">
                            <label class="input-label">Must-Have Features</label>

                            <div class="button-group">
                                <input type="hidden" name="nonNegotiables" id="input-negotiables" required>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-negotiables', 'Parking')">Parking</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-negotiables', 'In-Unit Laundry')">In-Unit
                                    Laundry</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-negotiables', 'Central Air')">Central
                                    Air</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-negotiables', 'Dishwasher')">Dishwasher</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-negotiables', 'Outdoor Space')">Outdoor
                                    Space</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-negotiables', 'Gym Access')">Gym Access</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-negotiables', 'Storage')">Storage</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-negotiables', 'Utilities Included')">Utilities
                                    Included</button>
                                <button type="button" class="option-btn"
                                    onclick="toggleOption(this, 'input-negotiables', 'Doorman / Security')">Doorman /
                                    Security</button>
                            </div>
                        </div>

                        <!-- Pet Logic -->
                        <div class="input-group">
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" name="hasPets" id="hasPetsCheckbox"
                                    onchange="togglePetOptions()">
                                <span class="input-label" style="margin: 0;">Pets</span>
                            </label>

                            <div id="petOptions" style="display: none; margin-top: 15px; transition: all 0.3s ease;">
                                <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                        <input type="checkbox" name="petType" value="Cat">
                                        <span class="input-label" style="margin: 0;">Cat</span>
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                        <input type="checkbox" name="petType" value="Dog" id="dogCheckbox"
                                            onchange="toggleDogOptions()">
                                        <span class="input-label" style="margin: 0;">Dog</span>
                                    </label>
                                </div>

                                <div id="dogOptions" style="display: none; margin-top: 15px;">
                                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                        <input type="checkbox" name="dogSize" value="Over 50lbs">
                                        <span class="input-label" style="margin: 0;">Over 50lbs</span>
                                    </label>
                                </div>
                            </div>
                        </div>


                        <div style="display: flex; gap: 10px;">
                            <button type="button" class="btn-submit"
                                style="background: transparent; color: var(--text-color); border: 1px solid var(--border-color); flex: 1;"
                                onclick="prevSection()">Back</button>
                            <button type="button" class="btn-submit" style="flex: 2;"
                                onclick="nextSection()">Continue</button>
                        </div>
                    </div>

                    <!-- SECTION 3: FINANCIAL & BACKGROUND -->
                    <div id="section-3" class="form-section">
                        <div style="margin-bottom: 30px;">
                            <span class="badge">STEP 03 OF 04</span>
                            <h2 style="margin-top: 10px; font-size: 24px;">Financial Information</h2>
                        </div>

                        <div class="input-group">
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" name="coapplicants" id="coapplicantsCheckbox" value="yes">
                                <span class="input-label" style="margin: 0;">Applying with Others</span>
                            </label>
                        </div>

                        <div class="input-group">
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" name="evictions" id="evictionsCheckbox" value="yes">
                                <span class="input-label" style="margin: 0;">Evictions in Past 4 Years</span>
                            </label>
                        </div>

                        <div class="input-group">
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                <input type="checkbox" name="verifiableIncome" id="verifiableIncomeCheckbox"
                                    value="yes">
                                <span class="input-label" style="margin: 0;">Income 3x Monthly Rent</span>
                            </label>
                        </div>

                        <div class="floating-label-group">
                            <select name="creditScore" id="creditScore"
                                onchange="this.dataset.hasValue = this.value ? 'true' : '';" required>
                                <option value="" selected disabled hidden></option>
                                <option value="excellent">Excellent (740+)</option>
                                <option value="great">Great (680-739)</option>
                                <option value="good">Good (620-679)</option>
                                <option value="fair">Fair (580-619)</option>
                                <option value="poor">Poor (&lt;580)</option>
                                <option value="unknown">Unknown</option>
                            </select>
                            <label for="creditScore">Credit Score</label>
                        </div>

                        <div style="display: flex; gap: 10px;">
                            <button type="button" class="btn-submit"
                                style="background: transparent; color: var(--text-color); border: 1px solid var(--border-color); flex: 1;"
                                onclick="prevSection()">Back</button>
                            <button type="button" class="btn-submit" style="flex: 2;"
                                onclick="nextSection()">Continue</button>
                        </div>
                    </div>

                    <!-- SECTION 4: ADDITIONAL INFO -->
                    <div id="section-4" class="form-section">
                        <div style="margin-bottom: 30px;">
                            <span class="badge">STEP 04 OF 04</span>
                            <h2 style="margin-top: 10px; font-size: 24px;">Scheduling &amp; Notes</h2>
                        </div>

                        <div class="input-group">
                            <div style="margin-bottom: 15px;">
                                <label class="input-label">Available Days</label>
                                <div class="button-group">
                                    <input type="hidden" name="tourDays" id="input-tour-days" required>
                                    <button type="button" class="option-btn"
                                        onclick="toggleOption(this, 'input-tour-days', 'Mon')">Mon</button>
                                    <button type="button" class="option-btn"
                                        onclick="toggleOption(this, 'input-tour-days', 'Tue')">Tue</button>
                                    <button type="button" class="option-btn"
                                        onclick="toggleOption(this, 'input-tour-days', 'Wed')">Wed</button>
                                    <button type="button" class="option-btn"
                                        onclick="toggleOption(this, 'input-tour-days', 'Thu')">Thu</button>
                                    <button type="button" class="option-btn"
                                        onclick="toggleOption(this, 'input-tour-days', 'Fri')">Fri</button>
                                    <button type="button" class="option-btn"
                                        onclick="toggleOption(this, 'input-tour-days', 'Sat')">Sat</button>
                                    <button type="button" class="option-btn"
                                        onclick="toggleOption(this, 'input-tour-days', 'Sun')">Sun</button>
                                </div>
                            </div>

                            <div style="margin-bottom: 15px;">
                                <label class="input-label">Preferred Time of Day</label>
                                <div class="button-group">
                                    <input type="hidden" name="tourTimes" id="input-tour-times" required>
                                    <button type="button" class="option-btn"
                                        onclick="toggleOption(this, 'input-tour-times', 'Morning (9-12)')">Morning
                                        (9-12)</button>
                                    <button type="button" class="option-btn"
                                        onclick="toggleOption(this, 'input-tour-times', 'Afternoon (12-5)')">Afternoon
                                        (12-5)</button>
                                    <button type="button" class="option-btn"
                                        onclick="toggleOption(this, 'input-tour-times', 'Evening (5+)')">Evening
                                        (5+)</button>
                                </div>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Additional Notes</label>
                            <textarea name="notes" placeholder="Is there anything else we should know?"></textarea>
                        </div>

                        <!-- Consent Block -->
                        <div
                            style="padding: 20px; background: rgba(0,0,0,0.03); border: 1px solid var(--border-color); margin-bottom: 30px;">
                            <label class="input-label" style="margin-bottom: 10px; display: block;">Consent</label>
                            <p
                                style="font-size: 12px; color: var(--muted-color); margin-bottom: 15px; line-height: 1.5;">
                                By continuing, I confirm that the information provided is accurate, that Iâ€™ve read and
                                received the
                                <a href="assets/pdf/Consumer%20Notice.pdf" target="_blank"
                                    style="color: var(--accent-color); font-weight: 700; text-decoration: underline;">Consumer
                                    Notice</a> and
                                <a href="assets/pdf/KLR%20Application%20Criteria%20%5B12.1.2025%5D.pdf" target="_blank"
                                    style="color: var(--accent-color); font-weight: 700; text-decoration: underline;">Application
                                    Criteria</a>, and that Key Legacy Realty may use this information to schedule tours.
                            </p>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" id="consentFull" required>
                                <span style="font-size: 12px;">I agree</span>
                            </label>
                        </div>

                        <div style="display: flex; gap: 10px;">
                            <button type="button" class="btn-submit"
                                style="background: transparent; color: var(--text-color); border: 1px solid var(--border-color); flex: 1;"
                                onclick="prevSection()">Back</button>
                            <button type="submit" class="btn-submit" style="flex: 2;">Submit</button>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>

    <script>
        let currentSection = 1;
        const totalSections = 4;
        const completedSections = new Set();
        let devMode = false;

        function toggleDevMode() {
            devMode = document.getElementById('devModeToggle').checked;

            // If dev mode is enabled, unlock all sections
            if (devMode) {
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('disabled');
                });
            } else {
                // If dev mode is disabled, re-apply the locked state
                document.querySelectorAll('.nav-item').forEach((item, index) => {
                    const sectionNum = index + 1;
                    if (sectionNum > 1 && !completedSections.has(sectionNum - 1)) {
                        item.classList.add('disabled');
                    }
                });
            }
        }

        function switchSection(step) {
            const navItem = document.querySelector(`.nav-item[data-section="${step}"]`);

            // Prevent switching to disabled sections (unless dev mode is on)
            if (!devMode && navItem && navItem.classList.contains('disabled')) {
                return;
            }

            // Remove active from all sections and nav items
            document.querySelectorAll('.form-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active');
                // Restore completed class if this section was completed and not the current one
                const sectionNum = parseInt(el.getAttribute('data-section'));
                if (completedSections.has(sectionNum) && sectionNum !== step) {
                    el.classList.add('completed');
                }
            });

            // Activate current section
            document.getElementById(`section-${step}`).classList.add('active');
            if (navItem) {
                navItem.classList.add('active');
                // Remove completed class from active tab to show active state instead
                navItem.classList.remove('completed');
            }

            currentSection = step;
        }

        function unlockSection(sectionNumber) {
            const navItem = document.querySelector(`.nav-item[data-section="${sectionNumber}"]`);
            if (navItem) {
                navItem.classList.remove('disabled');
            }
        }

        function markSectionCompleted(sectionNumber) {
            completedSections.add(sectionNumber);
            const navItem = document.querySelector(`.nav-item[data-section="${sectionNumber}"]`);
            if (navItem) {
                navItem.classList.add('completed');
            }
        }

        function toggleOption(btn, inputId, value) {
            btn.classList.toggle('active');

            const input = document.getElementById(inputId);
            const parent = btn.parentElement;
            const activeBtns = parent.querySelectorAll('.option-btn.active');

            const selectedValues = Array.from(activeBtns).map(b => b.textContent.trim()).join(', ');
            input.value = selectedValues;

            // Remove error styling if valid
            if (selectedValues) input.style.borderColor = '';
        }

        function nextSection() {
            if (currentSection < totalSections) {
                const section = document.getElementById(`section-${currentSection}`);
                let valid = true;
                let firstInvalidField = null;

                // Check text inputs, email, tel, date
                const textInputs = section.querySelectorAll('input[type="text"][required], input[type="email"][required], input[type="tel"][required], input[type="date"][required]');
                textInputs.forEach(input => {
                    if (!input.value.trim()) {
                        input.style.borderColor = 'red';
                        valid = false;
                        if (!firstInvalidField) firstInvalidField = input;
                    } else {
                        input.style.borderColor = '';
                    }
                });

                // Check select dropdowns
                const selects = section.querySelectorAll('select[required]');
                selects.forEach(select => {
                    if (!select.value || select.value === '') {
                        select.style.borderColor = 'red';
                        valid = false;
                        if (!firstInvalidField) firstInvalidField = select;
                    } else {
                        select.style.borderColor = '';
                    }
                });

                // Check checkboxes
                const checkboxes = section.querySelectorAll('input[type="checkbox"][required]');
                checkboxes.forEach(checkbox => {
                    if (!checkbox.checked) {
                        valid = false;
                        if (!firstInvalidField) firstInvalidField = checkbox;
                    }
                });

                // Check radio button groups
                const radioGroups = {};
                section.querySelectorAll('input[type="radio"][required]').forEach(radio => {
                    if (!radioGroups[radio.name]) {
                        radioGroups[radio.name] = [];
                    }
                    radioGroups[radio.name].push(radio);
                });

                for (const groupName in radioGroups) {
                    const radios = radioGroups[groupName];
                    const isChecked = radios.some(radio => radio.checked);
                    if (!isChecked) {
                        valid = false;
                        if (!firstInvalidField) firstInvalidField = radios[0];
                    }
                }

                // Check hidden inputs (button groups)
                const hiddenInputs = section.querySelectorAll('input[type="hidden"][required]');
                hiddenInputs.forEach(input => {
                    if (!input.value) {
                        valid = false;
                        if (!firstInvalidField) firstInvalidField = input;
                    }
                });

                if (!valid) {
                    alert('Please fill out all required fields before continuing.');
                    if (firstInvalidField) {
                        firstInvalidField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                    return;
                }

                // Mark current section as completed
                markSectionCompleted(currentSection);

                // Unlock next section
                if (currentSection + 1 <= totalSections) {
                    unlockSection(currentSection + 1);
                }

                switchSection(currentSection + 1);
            }
        }

        function prevSection() {
            if (currentSection > 1) {
                switchSection(currentSection - 1);
            }
        }

        function handleFinalSubmit(e) {
            e.preventDefault();

            // Validate section 4 fields before submitting
            const section = document.getElementById('section-4');
            let valid = true;
            let firstInvalidField = null;

            // Check hidden inputs (button groups for days and times)
            const hiddenInputs = section.querySelectorAll('input[type="hidden"][required]');
            hiddenInputs.forEach(input => {
                if (!input.value) {
                    valid = false;
                    if (!firstInvalidField) firstInvalidField = input;
                }
            });

            // Check consent checkbox
            const consentCheckbox = document.getElementById('consentFull');
            if (!consentCheckbox.checked) {
                valid = false;
                if (!firstInvalidField) firstInvalidField = consentCheckbox;
            }

            if (!valid) {
                alert('Please fill out all required fields before submitting.');
                if (firstInvalidField) {
                    firstInvalidField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                return;
            }

            // Here you would gather all form data: const data = new FormData(e.target);
            alert('Application Transmission Successful.\n\nThank you for choosing Key Legacy Realty.');
            // Form submitted successfully
        }

        function quickFillFinancials() {
            // Evictions checkbox: unchecked = no evictions
            document.getElementById('evictionsCheckbox').checked = false;
            // Income 3x: Yes selected
            document.querySelector('input[name="verifiableIncome"][value="yes"]').checked = true;
            // Co-applicants checkbox: unchecked = just me
            document.getElementById('coapplicantsCheckbox').checked = false;
        }

        function togglePetOptions() {
            const hasPets = document.getElementById('hasPetsCheckbox').checked;
            const petOptions = document.getElementById('petOptions');
            if (hasPets) {
                petOptions.style.display = 'block';
            } else {
                petOptions.style.display = 'none';
                // Reset internal state if desired, but hiding is sufficient for now
                document.getElementById('dogCheckbox').checked = false;
                toggleDogOptions(); // Ensure dog options are hidden too
            }
        }

        function toggleDogOptions() {
            const isDog = document.getElementById('dogCheckbox').checked;
            const dogOptions = document.getElementById('dogOptions');
            if (isDog) {
                dogOptions.style.display = 'block';
            } else {
                dogOptions.style.display = 'none';
            }
        }
    </script>
    <style>
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .option-btn {
            padding: 8px 12px;
            background: #f0f0f0;
            border: 1px solid transparent;
            border-radius: 0px;
            /* Enforcing sharp edges per TE style */
            font-size: 12px;
            font-weight: 600;
            color: var(--muted-color);
            cursor: pointer;
            transition: all 0.2s;
            text-transform: none;
        }

        .option-btn:hover {
            background: #e0e0e0;
            color: var(--text-color);
        }

        .option-btn.active {
            background: var(--text-color);
            color: var(--bg-color);
            border-color: var(--text-color);
        }

        .quick-fill-btn {
            width: 100%;
            padding: 10px;
            background: var(--text-color);
            border: 1px solid var(--text-color);
            color: var(--bg-color);
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .quick-fill-btn:hover {
            background: var(--accent-color);
            border-color: var(--accent-color);
            color: white;
        }
    </style>
</body>

</html>